{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"q-pa-md\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-6 q-mb-md\"\n};\nconst _hoisted_4 = {\n  class: \"col-6 q-pl-xs q-mb-md\"\n};\nconst _hoisted_5 = {\n  class: \"col-6 q-mb-md\"\n};\nconst _hoisted_6 = {\n  class: \"col-3 q-pl-xs q-mb-md\"\n};\nconst _hoisted_7 = {\n  class: \"col-3 q-pl-xs q-mb-md\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_q_spinner_gears = _resolveComponent(\"q-spinner-gears\");\n  const _component_q_input = _resolveComponent(\"q-input\");\n  const _component_q_btn = _resolveComponent(\"q-btn\");\n  const _component_q_form = _resolveComponent(\"q-form\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_ctx.loading ? (_openBlock(), _createBlock(_component_q_spinner_gears, {\n    key: 0,\n    color: \"primary\",\n    size: \"80px\"\n  })) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_q_form, {\n    onSubmit: $setup.onSubmit\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_q_input, {\n      filled: \"\",\n      modelValue: $setup.nome,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.nome = $event),\n      label: \"Seu nome *\",\n      hint: \"Nome\",\n      \"lazy-rules\": \"\",\n      rules: [val => val && val.length > 0 || 'Por favor digite seu nome']\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_q_input, {\n      filled: \"\",\n      modelValue: $setup.sobrenome,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.sobrenome = $event),\n      label: \"Seu sobrenome *\",\n      \"lazy-rules\": \"\",\n      rules: [val => val !== null && val !== '' || 'Por favor digite seu sobrenome']\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_q_input, {\n      filled: \"\",\n      modelValue: $setup.email,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.email = $event),\n      label: \"Seu email *\",\n      \"lazy-rules\": \"\",\n      rules: [val => val !== null && val !== '' || 'Por favor digite um email válido']\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_q_input, {\n      filled: \"\",\n      modelValue: $setup.telefone,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.telefone = $event),\n      label: \"Seu telefone *\",\n      \"lazy-rules\": \"\",\n      rules: [val => val !== null && val !== '' || 'Por favor digite seu telefone']\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_q_input, {\n      filled: \"\",\n      modelValue: $setup.cep,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.cep = $event),\n      label: \"Seu CEP *\",\n      \"lazy-rules\": \"\",\n      rules: [val => val !== null && val !== '' || 'Por favor digite seu CEP ']\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"])])]), _createElementVNode(\"div\", null, [_createVNode(_component_q_btn, {\n      label: \"Salvar\",\n      type: \"submit\",\n      color: \"primary\"\n    })])]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", null, \"Cliente ID:\" + _toDisplayString(_ctx.$route.params.id), 1 /* TEXT */)])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_ctx","loading","_createBlock","_component_q_spinner_gears","key","color","size","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","_component_q_form","onSubmit","$setup","default","_withCtx","_hoisted_2","_hoisted_3","_component_q_input","filled","modelValue","nome","_cache","$event","label","hint","rules","val","length","_hoisted_4","sobrenome","_hoisted_5","email","_hoisted_6","telefone","_hoisted_7","cep","_component_q_btn","type","_","_toDisplayString","$route","params","id"],"sources":["C:\\Users\\PC01\\Documents\\Desafio_Eliezer_Embracon\\front_end\\desafio\\src\\components\\FormularioCliente.vue"],"sourcesContent":["<template>\r\n   <q-spinner-gears v-if=\"loading\" color=\"primary\" size=\"80px\" />\r\n  <div class=\"q-pa-md\">\r\n    <q-form\r\n      @submit=\"onSubmit\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-6 q-mb-md\">\r\n          <q-input\r\n            filled\r\n            v-model=\"nome\"\r\n            label=\"Seu nome *\"\r\n            hint=\"Nome\"\r\n            lazy-rules\r\n            :rules=\"[val => val && val.length > 0 || 'Por favor digite seu nome']\"\r\n          />\r\n        </div>\r\n        <div class=\"col-6 q-pl-xs q-mb-md\">\r\n          <q-input\r\n            filled\r\n            v-model=\"sobrenome\"\r\n            label=\"Seu sobrenome *\"\r\n            lazy-rules\r\n            :rules=\"[\r\n              val => val !== null && val !== '' || 'Por favor digite seu sobrenome'\r\n            ]\"\r\n          />\r\n        </div>\r\n        <div class=\"col-6 q-mb-md\">\r\n          <q-input\r\n            filled\r\n            v-model=\"email\"\r\n            label=\"Seu email *\"\r\n            lazy-rules\r\n            :rules=\"[\r\n              val => val !== null && val !== '' || 'Por favor digite um email válido'\r\n            ]\"\r\n          />\r\n        </div>\r\n        <div class=\"col-3 q-pl-xs q-mb-md\">\r\n          <q-input\r\n            filled\r\n            v-model=\"telefone\"\r\n            label=\"Seu telefone *\"\r\n            lazy-rules\r\n            :rules=\"[\r\n              val => val !== null && val !== '' || 'Por favor digite seu telefone'\r\n            ]\"\r\n          />\r\n        </div>\r\n        <div class=\"col-3 q-pl-xs q-mb-md\">\r\n          <q-input\r\n            filled\r\n            v-model=\"cep\"\r\n            label=\"Seu CEP *\"\r\n            lazy-rules\r\n            :rules=\"[\r\n              val => val !== null && val !== '' || 'Por favor digite seu CEP '\r\n            ]\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <q-btn label=\"Salvar\" type=\"submit\" color=\"primary\"/>\r\n      </div>\r\n    </q-form>\r\n    <div>\r\n      <p>Cliente ID:{{ $route.params.id }}  </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport { api } from '@/boot/axios';\r\nimport { useQuasar } from 'quasar';\r\nimport {  ref, onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n\r\nconst $q = useQuasar();\r\nconst nome = ref(null);\r\nconst sobrenome = ref(null);\r\nconst email = ref(null);\r\nconst telefone = ref(null);\r\nconst cep = ref(null);\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst clientId = ref('');\r\n\r\nconst buscarCliente = async (clientId) => {\r\n  try {\r\n    const response = await api.get(`/clientes/${clientId.value}`);\r\n    const dadosCliente = response.data;\r\n    \r\n      nome.value =  dadosCliente.nome,\r\n      sobrenome.value = dadosCliente.sobrenome,\r\n      email.value = dadosCliente.email,\r\n      telefone.value = dadosCliente.telefone,\r\n      cep.value = dadosCliente.endereco.cep.replace(\"-\", \"\")\r\n\r\n    \r\n  } catch (error) {\r\n    console.error('Erro ao buscar cliente:', error);\r\n  }\r\n};\r\n\r\n\r\n\r\nconst onSubmit = async () => {\r\n  if (clientId.value != null) {\r\n    await editarCliente();\r\n    \r\n  } else {\r\n    await criarCliente();\r\n  }\r\n};\r\n\r\nconst editarCliente = async () => {\r\n  try {\r\n    loading.value = true;\r\n    await api.put(`/clientes/${clientId.value}`, {\r\n      nome: nome.value,\r\n      sobrenome: sobrenome.value,\r\n      email: email.value,\r\n      telefone: telefone.value,\r\n      cep: cep.value\r\n    });\r\n\r\n    notificarSucesso('Cliente editado com sucesso');\r\n    limparCampos();\r\n    setTimeout(() => {\r\n      loading.value = false;\r\n      router.push('/clientes/list');\r\n    }, 1000);\r\n  } catch (error) {\r\n    notificarErro('Erro ao editar cliente');\r\n  }\r\n};\r\n\r\nconst criarCliente = async () => {\r\n  try {\r\n    await api.post(`/clientes`, {\r\n      nome: nome.value,\r\n      sobrenome: sobrenome.value,\r\n      email: email.value,\r\n      telefone: telefone.value,\r\n      cep: cep.value\r\n    });\r\n\r\n    notificarSucesso('Cliente criado com sucesso');\r\n    limparCampos();\r\n   \r\n\r\n  } catch (error) {\r\n    notificarErro('Erro ao criar cliente');\r\n  }\r\n};\r\n\r\nconst notificarSucesso = (mensagem) => {\r\n  $q.notify({\r\n    color: 'green-4',\r\n    textColor: 'white',\r\n    icon: 'cloud_done',\r\n    message: mensagem\r\n  });\r\n};\r\n\r\nconst notificarErro = (mensagem) => {\r\n  $q.notify({\r\n    color: 'red-5',\r\n    textColor: 'white',\r\n    icon: 'warning',\r\n    message: mensagem\r\n  });\r\n};\r\n\r\nconst limparCampos = () => {\r\n  nome.value = '';\r\n  sobrenome.value = '';\r\n  email.value = '';\r\n  telefone.value = '';\r\n  cep.value = '';\r\n};\r\n\r\n\r\n\r\nonMounted(() => {\r\n  \r\n  clientId.value = route.params.id;\r\n  clientId.value !== undefined && clientId.value !== null && clientId.value !== '' && buscarCliente(clientId);\r\n});\r\n\r\n\r\n\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}